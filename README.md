# üéâ Gerenciador de Eventos - Sistema QR Code

Sistema completo de gerenciamento de eventos com confirma√ß√£o de presen√ßa via QR Code, desenvolvido para o CAAMG.

## üöÄ Funcionalidades

- ‚úÖ CRUD completo de usu√°rios e eventos
- ‚úÖ Sistema de convites com QR Code √∫nico
- ‚úÖ Check-in via leitura de QR Code e c√≥digo manual
- ‚úÖ Dashboard com estat√≠sticas em tempo real
- ‚úÖ Envio de convites por email
- ‚úÖ Interface responsiva e moderna com TailwindCSS
- ‚úÖ Autentica√ß√£o JWT segura
- ‚úÖ Exporta√ß√£o de dados (CSV)
- ‚úÖ Importa√ß√£o de convidados via CSV
- ‚úÖ Controle de inscri√ß√µes (pausar/retomar)
- ‚úÖ Eventos p√∫blicos com formul√°rio de inscri√ß√£o
- ‚úÖ Upload de imagens para eventos
- ‚úÖ Campos personalizados para eventos
- ‚úÖ Sistema de permiss√µes (Admin/Organizador)
- ‚úÖ **Construtor de Formul√°rios Drag & Drop**
- ‚úÖ **Editor de P√°gina P√∫blica Personaliz√°vel**
- ‚úÖ **C√≥digo de Incorpora√ß√£o (Embed)**
- ‚úÖ **Visualiza√ß√£o em Tempo Real**
- ‚úÖ **Temas e Cores Customiz√°veis**
- ‚úÖ **Editor de Texto Rico (React-Quill)** para descri√ß√£o de eventos
- ‚úÖ **Gera√ß√£o de c√≥digos √∫nicos simples** (4 letras do evento + n√∫mero)
- ‚úÖ **P√°gina de detalhes do convidado** com QR Code e informa√ß√µes completas
- ‚úÖ **Download do QR Code** com configura√ß√£o CSP adequada
- ‚úÖ **Check-in por QR Code e c√≥digo manual** com interface clara
- ‚úÖ **Exporta√ß√£o e importa√ß√£o com campos personalizados**
- ‚úÖ **Visualiza√ß√£o detalhada de convidados** com hist√≥rico de check-ins
- ‚úÖ **Sistema de check-in duplo** (QR Code + c√≥digo manual)
- ‚úÖ **P√°gina de detalhes do convidado** com QR Code, status e hist√≥rico
- ‚úÖ **Download de QR Code** com configura√ß√£o de seguran√ßa CSP
- ‚úÖ **Listagem de convidados** com campos personalizados e c√≥digos QR

## üõ†Ô∏è Tecnologias

### Backend
- **Node.js 18+** + Express.js
- **PostgreSQL** + Prisma ORM
- **JWT Authentication**
- **QR Code generation** (qrcode)
- **Email integration** (nodemailer)
- **File upload** (multer)
- **Validation** (express-validator)
- **CORS** (cors)
- **Rate limiting** (express-rate-limit)
- **Helmet** para seguran√ßa e CSP

### Frontend
- **React 18** + React Router v6
- **TailwindCSS** + PostCSS
- **QR Code Scanner** (react-qr-reader)
- **React Hook Form** + Yup validation
- **Axios** para requisi√ß√µes HTTP
- **React Icons** + **Lucide React**
- **React Hot Toast** para notifica√ß√µes
- **@dnd-kit** para drag & drop
- **React Colorful** para sele√ß√£o de cores
- **React-Quill** para edi√ß√£o de texto rica

## üì¶ Instala√ß√£o Completa

### Pr√©-requisitos
- **Node.js 18+** (recomendado: v20+)
- **PostgreSQL 12+**
- **npm** ou **yarn**
- **Git**

### 1. Clone o reposit√≥rio
```bash
git clone https://github.com/jeffersonjrpro/GerenciadordeEventosCAAMG.git
cd GerenciadordeEventosCAAMG
```

### 2. Instale as depend√™ncias do Backend
```bash
cd backend
npm install
```

**Depend√™ncias do Backend:**
```json
{
  "express": "^4.18.2",
  "cors": "^2.8.5",
  "helmet": "^7.1.0",
  "express-rate-limit": "^7.1.5",
  "bcryptjs": "^2.4.3",
  "jsonwebtoken": "^9.0.2",
  "express-validator": "^7.0.1",
  "multer": "^1.4.5-lts.1",
  "qrcode": "^1.5.4",
  "nodemailer": "^6.9.7",
  "@sendgrid/mail": "^8.0.1",
  "prisma": "^5.6.0",
  "@prisma/client": "^5.6.0",
  "dotenv": "^16.3.1",
  "csv-parser": "^3.2.0",
  "csv-writer": "^1.6.0",
  "array-flatten": "^3.0.0",
  "moment": "^2.29.4",
  "pg": "^8.16.2",
  "uuid": "^9.0.1"
}
```

**DevDependencies do Backend:**
```json
{
  "nodemon": "^3.0.2"
}
```

### 3. Instale as depend√™ncias do Frontend
```bash
cd ../frontend
npm install
```

Se preferir, o comando `npm run install:all` na raiz do projeto instala tudo de uma vez. As depend√™ncias do frontend j√° incluem pacotes para o editor de texto (`react-quill`) e para uma melhor estiliza√ß√£o de conte√∫do (`@tailwindcss/typography`).

**Depend√™ncias do Frontend:**
```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.20.1",
  "react-hook-form": "^7.48.2",
  "react-qr-reader": "^3.0.0-beta-1",
  "qrcode.react": "^3.1.0",
  "axios": "^1.6.2",
  "react-hot-toast": "^2.4.1",
  "react-datepicker": "^4.25.0",
  "date-fns": "^2.30.0",
  "lucide-react": "^0.294.0",
  "clsx": "^2.0.0",
  "tailwind-merge": "^2.0.0",
  "ajv": "^8.17.1",
  "ajv-keywords": "^5.1.0",
  "react-dev-utils": "^12.0.1",
  "web-vitals": "^2.1.4",
  "@testing-library/jest-dom": "^5.17.0",
  "@testing-library/react": "^13.4.0",
  "@testing-library/user-event": "^14.5.2",
  "react-scripts": "5.0.1",
  "@dnd-kit/core": "^6.3.1",
  "@dnd-kit/sortable": "^10.0.0",
  "@dnd-kit/utilities": "^3.2.2",
  "@dnd-kit/modifiers": "^9.0.0",
  "react-colorful": "^5.6.1",
  "react-quill": "^2.0.0"
}
```

**DevDependencies do Frontend:**
```json
{
  "tailwindcss": "^3.3.6",
  "postcss": "^8.4.32",
  "autoprefixer": "^10.4.16"
}
```

### 4. Configure o banco de dados PostgreSQL
```sql
-- Crie o banco de dados
CREATE DATABASE eventos_caamg;

-- Crie um usu√°rio (opcional)
CREATE USER eventos_user WITH PASSWORD 'sua_senha';
GRANT ALL PRIVILEGES ON DATABASE eventos_caamg TO eventos_user;
```

### 5. Configure as vari√°veis de ambiente

**Backend (.env):**
```env
# Database
DATABASE_URL="postgresql://eventos_user:sua_senha@localhost:5432/eventos_caamg"

# JWT
JWT_SECRET="sua-chave-secreta-super-segura-aqui"

# Email (Nodemailer)
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT=587
EMAIL_USER="seu-email@gmail.com"
EMAIL_PASS="sua-senha-de-app"

# Email (SendGrid - alternativo)
SENDGRID_API_KEY="sua-api-key-sendgrid"
EMAIL_FROM="noreply@seusite.com"

# Server
PORT=3001
NODE_ENV=development

# Upload
UPLOAD_PATH="./uploads"
MAX_FILE_SIZE=5242880

# CORS (opcional)
ALLOWED_ORIGINS="http://localhost:3000,https://seusite.com"

# Rate Limiting (opcional)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

**Frontend (.env):**
```env
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_BASE_URL=http://localhost:3000
```

### 6. Configure o TailwindCSS (Frontend)
```bash
cd frontend
npx tailwindcss init -p
```

O arquivo `tailwind.config.js` j√° est√° configurado com:
- Cores personalizadas (primary, success, warning, danger)
- Anima√ß√µes customizadas
- Fonte Inter
- Configura√ß√µes de responsividade

### 7. Execute as migra√ß√µes do banco
```bash
cd backend
npx prisma generate
npx prisma migrate dev --name init
```

### 8. Crie o usu√°rio administrador
```bash
cd backend
node create-admin.js
```

### 9. Inicie o desenvolvimento

**Op√ß√£o 1: Iniciar separadamente**
```bash
# Terminal 1 - Backend
cd backend
npm start

# Terminal 2 - Frontend
cd frontend
npm start
```

**Op√ß√£o 2: Iniciar tudo junto (raiz do projeto)**
```bash
npm run dev
```

## üåê Acesso ao Sistema

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:3001
- **Documenta√ß√£o API**: http://localhost:3001/api/docs

## üë§ Primeiro Acesso

1. **Login inicial:**
   - Email: `admin@caamg.com`
   - Senha: `admin123`

2. **Criar conta:** Registre-se com seu email
3. **Criar evento:** Adicione detalhes do evento
4. **Adicionar convidados:** Importe via CSV ou adicione manualmente
5. **Compartilhar:** Use os links p√∫blicos para divulga√ß√£o

## üì± Funcionalidades Principais

### Para Organizadores
- ‚úÖ Criar e gerenciar eventos
- ‚úÖ Adicionar/importar convidados
- ‚úÖ Controlar inscri√ß√µes (pausar/retomar)
- ‚úÖ Visualizar estat√≠sticas em tempo real
- ‚úÖ Exportar dados dos convidados
- ‚úÖ Tornar eventos p√∫blicos/privados
- ‚úÖ **Construtor de Formul√°rios Drag & Drop**
- ‚úÖ **Editor de P√°gina P√∫blica**
- ‚úÖ **Campos Personalizados Avan√ßados**
- ‚úÖ **C√≥digo de Incorpora√ß√£o (Embed)**

### Para Convidados
- ‚úÖ Acessar eventos p√∫blicos
- ‚úÖ Inscrever-se via formul√°rio customizado
- ‚úÖ Receber QR Code √∫nico
- ‚úÖ Confirmar presen√ßa via QR Code

### Para Administradores
- ‚úÖ Gerenciar todos os usu√°rios
- ‚úÖ Visualizar todos os eventos
- ‚úÖ Acessar estat√≠sticas globais
- ‚úÖ Configurar sistema

## üé® Novas Funcionalidades

### Construtor de Formul√°rios
- **Drag & Drop**: Arraste campos para reordenar
- **Tipos de Campo**: Texto, Email, Telefone, N√∫mero, Data, Checkbox
- **Propriedades**: R√≥tulo, Placeholder, Obrigat√≥rio
- **Visualiza√ß√£o**: Preview em tempo real
- **Configura√ß√µes**: T√≠tulo, descri√ß√£o, mensagens personalizadas
- **Campos Personalizados**: Integra√ß√£o com campos customizados do evento

### Editor de P√°gina P√∫blica
- **Layout Moderno**: Design responsivo e profissional
- **Temas Customiz√°veis**: Cores prim√°rias, secund√°rias, fundo e texto
- **Cabe√ßalho**: T√≠tulo, subt√≠tulo, imagem do evento
- **Conte√∫do**: Data, local, descri√ß√£o, organizador
- **Inscri√ß√£o**: Formul√°rio integrado, textos personalizados
- **C√≥digo Embed**: Incorpora√ß√£o em outros sites
- **Visualiza√ß√£o**: Preview em iframe

### Campos Personalizados
- **Tipos Suportados**: Texto, Email, N√∫mero, Telefone, Data
- **Valida√ß√£o**: Campos obrigat√≥rios opcionais
- **Integra√ß√£o**: Autom√°tica com formul√°rios e listas
- **Flexibilidade**: Adicionar/remover conforme necess√°rio

### Sistema de Check-in Avan√ßado
- **Check-in Duplo**: QR Code + c√≥digo manual (4 letras + n√∫mero)
- **Interface Clara**: Op√ß√µes visuais para ambos os m√©todos
- **Valida√ß√£o em Tempo Real**: Confirma√ß√£o imediata do check-in
- **Hist√≥rico Completo**: Registro de todos os check-ins realizados
- **C√≥digos √önicos**: Gera√ß√£o autom√°tica de c√≥digos simples e memor√°veis

### P√°gina de Detalhes do Convidado
- **Informa√ß√µes Completas**: Dados pessoais, campos personalizados, status
- **QR Code Visual**: Exibi√ß√£o do QR Code com op√ß√£o de download
- **Hist√≥rico de Presen√ßa**: Status de confirma√ß√£o e check-ins realizados
- **Informa√ß√µes do Evento**: Data, local e detalhes do evento
- **Download de QR Code**: Funcionalidade com configura√ß√£o CSP adequada
- **Edi√ß√£o de Convidado**: Acesso r√°pido para editar informa√ß√µes

### Listagem de Convidados Melhorada
- **Campos Personalizados**: Exibi√ß√£o de campos customizados na tabela
- **C√≥digos QR**: Coluna com c√≥digos QR clic√°veis
- **Filtros Avan√ßados**: Por status, presen√ßa e busca textual
- **Exporta√ß√£o Completa**: Inclui campos personalizados no CSV
- **Importa√ß√£o Inteligente**: Suporte a campos personalizados via CSV

## üéØ Estrutura do Projeto

```
GerenciadordeEventosCAAMG/
‚îú‚îÄ‚îÄ backend/                    # API REST
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Controladores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/            # Rotas da API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/          # L√≥gica de neg√≥cio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middlewares
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/            # Configura√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                # Schema e migra√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ uploads/               # Arquivos enviados
‚îÇ   ‚îî‚îÄ‚îÄ temp/                  # Arquivos tempor√°rios
‚îú‚îÄ‚îÄ frontend/                   # React SPA
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/        # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FormBuilder.js # Construtor de formul√°rios
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FormField.js   # Campo de formul√°rio
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FormPreview.js # Visualiza√ß√£o de formul√°rio
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FormSettings.js # Configura√ß√µes de formul√°rio
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PublicPageEditor.js # Editor de p√°gina p√∫blica
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/             # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/          # Contextos React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/          # Servi√ßos de API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hooks/             # Hooks customizados
‚îÇ   ‚îî‚îÄ‚îÄ public/                # Arquivos p√∫blicos
‚îú‚îÄ‚îÄ docs/                       # Documenta√ß√£o
‚îî‚îÄ‚îÄ scripts/                    # Scripts de automa√ß√£o
```

## üîß Scripts Dispon√≠veis

### Backend
```bash
npm start              # Inicia em produ√ß√£o
npm run dev            # Inicia em desenvolvimento
npm run build          # Build de produ√ß√£o
npx prisma studio      # Interface visual do banco
npx prisma migrate dev # Executa migra√ß√µes
npm run seed           # Popula banco com dados de teste
```

### Frontend
```bash
npm start              # Inicia servidor de desenvolvimento
npm run build          # Build de produ√ß√£o
npm run test           # Executa testes
npm run eject          # Eject do Create React App
```

### Raiz do Projeto
```bash
npm run dev            # Inicia backend e frontend
npm run install:all    # Instala todas as depend√™ncias
npm run build:all      # Build de produ√ß√£o completo
```

## ‚öôÔ∏è Configura√ß√µes Espec√≠ficas

### Seguran√ßa
- **Helmet.js** para headers de seguran√ßa
- **CORS** configurado para desenvolvimento e produ√ß√£o
- **Rate Limiting** (comentado para desenvolvimento)
- **JWT** com expira√ß√£o configur√°vel
- **Bcrypt** para hash de senhas

### Upload de Arquivos
- **Multer** para upload de imagens
- **Valida√ß√£o** de tipos de arquivo
- **Limite** de tamanho configur√°vel
- **Armazenamento** local em `/uploads`

### Banco de Dados
- **Prisma ORM** com PostgreSQL
- **Migra√ß√µes** autom√°ticas
- **Seed** para dados iniciais
- **Studio** para visualiza√ß√£o
- **Campos JSON** para configura√ß√µes de formul√°rio e p√°gina

### Frontend
- **TailwindCSS** com configura√ß√£o personalizada
- **React Router** com rotas protegidas
- **Context API** para estado global
- **Axios** com interceptors
- **React Hook Form** com valida√ß√£o
- **@dnd-kit** para drag & drop
- **React Colorful** para sele√ß√£o de cores
- **Editor de Texto Rico (React-Quill)**

## üö® Solu√ß√£o de Problemas

### Erro de Porta em Uso
```bash
# Windows
netstat -ano | findstr :3001
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:3001 | xargs kill -9
```

### Erro de Conex√£o com Banco
```bash
# Verificar se PostgreSQL est√° rodando
# Windows: Services > PostgreSQL
# Linux: sudo systemctl status postgresql
```

### Erro de Depend√™ncias
```bash
# Limpar cache e reinstale
rm -rf node_modules package-lock.json
npm install

# Para problemas com @dnd-kit
npm install --legacy-peer-deps
```

### Erro de Sintaxe no Backend
```bash
# Verificar sintaxe do JavaScript
cd backend
node -c src/controllers/eventController.js
```

## üöÄ Deploy em Produ√ß√£o

Para fazer o deploy em um servidor de produ√ß√£o, consulte o guia completo:

**[üìñ Guia de Deploy](DEPLOY.md)**

### Resumo r√°pido:
1. **Configurar servidor** (Node.js, PostgreSQL, PM2)
2. **Configurar vari√°veis de ambiente** para produ√ß√£o
3. **Executar migra√ß√µes** do banco
4. **Build do frontend** e configura√ß√£o do Nginx
5. **Configurar SSL/HTTPS** com Let's Encrypt
6. **Configurar backup** autom√°tico

### Scripts de produ√ß√£o:
```bash
# Backend
npm run build        # Gera Prisma Client
npm run deploy       # Build + Start
pm2 start ecosystem.config.js  # Com PM2

# Frontend
npm run build        # Build de produ√ß√£o
```

## üìä Funcionalidades Futuras

- [ ] Integra√ß√£o com WhatsApp Business API
- [ ] Sistema de pagamentos (PIX, cart√£o)
- [ ] Formul√°rios customiz√°veis avan√ßados (m√∫ltiplas p√°ginas)
- [ ] Suporte a m√∫ltiplos organizadores por evento
- [ ] Exporta√ß√£o avan√ßada (Excel, PDF, relat√≥rios)
- [ ] Widget para embed em outros sites
- [ ] App mobile (React Native)
- [ ] Sistema de notifica√ß√µes push
- [ ] Backup autom√°tico do banco
- [ ] Dashboard administrativo avan√ßado
- [ ] Templates de formul√°rios pr√©-definidos
- [ ] Sistema de temas pr√©-configurados
- [ ] Analytics avan√ßado de formul√°rios

## ü§ù Contribui√ß√£o

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para detalhes.

## üë®‚Äçüíª Desenvolvido por

**Jefferson Jr** - Desenvolvedor Full Stack

- GitHub: [@jeffersonjrpro](https://github.com/jeffersonjrpro)
- Email: contato@jeffersonjr.dev

## üôè Agradecimentos

- CAAMG - Centro Acad√™mico de Administra√ß√£o e Gest√£o
- Comunidade React e Node.js
- Contribuidores do projeto 